<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:SyncTrip.Mobile.Features.Authentication.ViewModels"
             x:Class="SyncTrip.Mobile.Features.Authentication.Views.RegistrationPage"
             x:DataType="vm:RegistrationViewModel"
             Title="Créer un compte">

    <ScrollView>
        <VerticalStackLayout Padding="30" Spacing="20">

            <Label Text="Bienvenue sur SyncTrip !"
                   FontSize="28"
                   FontAttributes="Bold"
                   Margin="0,20,0,10" />

            <Label Text="Créons votre compte"
                   FontSize="16"
                   TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray400}}"
                   Margin="0,0,0,20" />

            <!-- Username (Required) -->
            <Label Text="Pseudo *"
                   FontSize="14"
                   FontAttributes="Bold" />
            <Frame BorderColor="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}"
                   CornerRadius="10"
                   Padding="0"
                   HasShadow="False">
                <Entry Placeholder="Votre pseudo"
                       Text="{Binding Username}"
                       MaxLength="50"
                       Margin="15,0" />
            </Frame>

            <!-- FirstName (Optional) -->
            <Label Text="Prénom"
                   FontSize="14"
                   FontAttributes="Bold" />
            <Frame BorderColor="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}"
                   CornerRadius="10"
                   Padding="0"
                   HasShadow="False">
                <Entry Placeholder="Votre prénom (optionnel)"
                       Text="{Binding FirstName}"
                       Margin="15,0" />
            </Frame>

            <!-- LastName (Optional) -->
            <Label Text="Nom"
                   FontSize="14"
                   FontAttributes="Bold" />
            <Frame BorderColor="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}"
                   CornerRadius="10"
                   Padding="0"
                   HasShadow="False">
                <Entry Placeholder="Votre nom (optionnel)"
                       Text="{Binding LastName}"
                       Margin="15,0" />
            </Frame>

            <!-- BirthDate (Required) -->
            <Label Text="Date de naissance *"
                   FontSize="14"
                   FontAttributes="Bold" />
            <Frame BorderColor="{AppThemeBinding Light={StaticResource Gray300}, Dark={StaticResource Gray600}}"
                   CornerRadius="10"
                   Padding="15"
                   HasShadow="False">
                <DatePicker Date="{Binding BirthDate}"
                           MaximumDate="{Binding MaximumDate}"
                           Format="dd/MM/yyyy" />
            </Frame>

            <Label Text="⚠️ Vous devez avoir plus de 14 ans"
                   FontSize="12"
                   TextColor="{StaticResource Warning}"
                   Margin="0,-10,0,0" />

            <!-- Register Button -->
            <Button Text="Créer mon compte"
                    Command="{Binding CompleteRegistrationCommand}"
                    IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}"
                    HeightRequest="50"
                    CornerRadius="25"
                    FontAttributes="Bold"
                    BackgroundColor="{StaticResource Primary}"
                    Margin="0,20,0,0" />

            <!-- Loading -->
            <ActivityIndicator IsVisible="{Binding IsBusy}"
                              IsRunning="{Binding IsBusy}"
                              Color="{StaticResource Primary}" />

            <!-- Error Message -->
            <Frame IsVisible="{Binding ErrorMessage, Converter={StaticResource IsNotNullOrEmptyConverter}}"
                   BorderColor="{StaticResource Error}"
                   BackgroundColor="Transparent"
                   Padding="15"
                   CornerRadius="10"
                   HasShadow="False">
                <Label Text="{Binding ErrorMessage}"
                       TextColor="{StaticResource Error}"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center" />
            </Frame>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
